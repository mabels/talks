<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>container ship</title>

		<meta name="description" content="lashing containers">
		<meta name="author" content="Meno Abels">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<style>
		.reveal h1,
		.reveal h2,
		.reveal h3,
		.reveal h4,
		.reveal h5,
		.reveal h6 {
		  text-transform: lowercase;
		}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background="#000000">
					<h1>lashing container</h1>
					<p>
						<small>powered by <a href="http://github.com/mabels/talks">meno@abels.name</a> / <a href="http://twitter.com/fastandfearless">@fastandfearless</a></small>
					</p>
				</section>

				<section data-background="#003377" data-background-transition="zoom">
					<h2>about me</h2>
					<ul>
            <li>i’m a software developer</li>
            <li>i’m an admin</li>
            <li>i’m a devop</li>
					</ul>
				</section>

				<section data-background="#116655" data-background-transition="convex">
          <h2>new kids on the block?<h2>
              <svg class="shell1"></svg>
              <script>
shell1 = {
 "name": "",
 "children": [
      {"name": "bare-metal", "size": 33},
      {"name": "vm", "size": 33},
 ]
}
              </script>
              <span class="footnode"><small>buzzword-bingo</small></span>
        </section>
				<section data-background="#227755" data-background-transition="convex">
						<h2>new kids on the block?</h2>

              <svg class="shell2"></svg>
              <script>
shell2 = {
 "name": "",
 "children": [
    {"name" : "docker", "children": [
        {"name": "bare", "size": 33},
        {"name": "vm", "size": 33}
      ]
    },
    {"name" : "lxc", "children": [
        {"name": "bare", "size": 33},
        {"name": "vm", "size": 33}
      ]
    },
    {"name" : "rkt", "children": [
        {"name": "bare", "size": 33},
        {"name": "vm", "size": 33}
      ]
    }
 ]
}
              </script>
              <span class="footnode"><small>buzzword-bingo</small></span>
				</section>

				<section data-background="#339955" data-background-transition="convex">
						<h2>new kids on the block?</h2>

              <svg class="shell3"></svg>
              <script>
shell3 = {
 "name": "cluster",
 "children": [
   { "name" : "coreos", 
     "children": [
      {"name" : "docker", "children": [
          {"name": "bare", "size": 33},
          {"name": "vm", "size": 33}
        ]
      },
      {"name" : "rkt", "children": [
          {"name": "bare", "size": 33},
          {"name": "vm", "size": 33}
        ]
      }
    ]
  },
  { "name" : "mesos", 
     "children": [
      {"name" : "docker", "children": [
          {"name": "bare", "size": 33},
          {"name": "vm", "size": 33}
        ]
      }
    ]
  },
  { "name" : "aws-ecs", 
     "children": [
      {"name" : "docker", "children": [
          {"name": "ec2-vm", "size": 33}
        ]
      }
    ]
  },
  { "name" : "gc-ce", 
     "children": [
      {"name" : "docker", "children": [
          {"name": "gcs", "size": 33}
        ]
      }
    ]
  },
  { "name" : "openstack", "children": [
      {"name": "vm", "size": 33}
    ]
  }
 ]
}
              </script>
              <span class="footnode"><small>buzzword-bingo</small></span>
				</section>

				<!-- Example of nested vertical slides -->
				<section data-background="#770033">
						<h2>is the real world ugly?</h2>
					  <span class="fragment">
							<h3>programm (de-version)</h3>
							<pre>
							<code class="bash" data-trim contenteditable>
#/bin/sh
# Implementierung der Deutsch gesprochenen Raumzeit
echo “Es ist $(get_raumzeit)”
							</code>
							<code class="bash" data-trim contenteditable>
# ./programm
Es ist Vormittag
</code>
						</pre>
						</span>
					</section>
					<section data-background="#770033" data-background-transition="slide">
							<h2>is the real world ugly?</h2>
							<h3>programm (en-version)</h3>
							<pre>
							<code class="bash" data-trim contenteditable>
#/bin/sh
# Implementation of the english spoken space time
echo “It is $(get_raumzeit)”
							</code>
							<code class="bash" data-trim contenteditable>
# ./programm
It is Vormittag
						</code>
						</pre>
						</p>
            It is <b style="font-size: 80px">Vormittag</b> (What?!??)
				</section>

				<section data-background="#990033" data-background-transition="fade">
						<h2>it might be an ugly place?</h2>
						<span class="fragment">
							<h3>How to solve this?</h3>
						</span>
						<span class="fragment">
							We need two implementations of "get_raumzeit" and "program".
						</span>
						<span class="fragment">
							<h3>What has to be changed in these programms?</h3>
						</span>
						<span class="fragment">
							All programms have to be changed to solve this. But is there any chance
							to solve it without an interface change?<br>
							<small>Means: the programm names stay stable and they remain in the same
							directory and no parameters have to be added or enviroment vars are used.</small>
						</span>
						<span class="fragment">
							<h2>Welcome to my (ugly) world!</h2>
						</span>
			</section>

				<section data-background="#3333aa" data-background-transition="fade">
					<h2>Replicate the World</h2>
						<span class="fragment">
							<h4>what if we have more than one / ?</h4>
						</span>
						<span class="fragment">
              <p>
							it is an easy solution if we are able to lead our
							user to the english or deutsch named /. 
              </p>
              <p>
              Yes we still need two implementations but the 
              interface is stable.
              </p>
						</span>
						<span class="fragment">
							<h4>we call these named / a container!</h4>
						<span>
				</section>

				<section data-background="#4411aa" data-background-transition="fade">
					<h2>Why containers today?</h2>
						<span class="fragment">
							To run one /(container) we "double" the resources(cpu/disk)
						</span>
						<span class="fragment">
							<table>
								<thead>
									<tr>
										<th>cost of</th>
										<th>in past</th>
										<th>today</th>
									</tr>
							</thead>
							<tbody>
								<tr>
									<td>hardware</td>
									<td>$$$$(200Gb)</td>
									<td>$$$$(4000Gb)/containers</td>
								</tr>
								<tr>
									<td>os-license</td>
									<td>$$$$</td>
									<td>0</td>
								</tr>
								<tr>
									<td>app-license</td>
									<td>$$$$</td>
									<td>$$$$ per core</td>
								</tr>
								<tr>
									<td>operation</td>
									<td>$$$$</td>
									<td>same with higher system count</td>
								</tr>
								<tr>
									<td>time</td>
									<td>10Mb/s</td>
									<td>150Mb/s</td>
								</tr>
							</tbody>
						</table>
						</span>

				</section>

				<section data-background="#223322" data-background-transition="zoom">
					<h2>running containers</h2>
					there are different styles of containers.
					<span class="fragment">
						<h3>choosing the right</h3>
						<ul>
							<li>cost</li>
							<li>security</li>
							<li>performance cpu/ram/disk/container</li>
							<li>isolation/resource-sharing</li>
							<li>handling-during runtime</li>
							<li>migration system-system</li>
						</ul>
					</span>

				</section>

				<section data-background="#226622" data-background-transition="concave">
					<h2>bare-metal</h2>
					<table>
						<tr>
							<td>cost</td>
							<td>----</td>
						</tr>
						<tr>
							<td>security</td>
							<td>++++</td>
						</tr>
						<tr>
							<td>performance cpu/ram/disk/container</td>
							<td>++++/++++/+++/++++</td>
						</tr>
						<tr>
							<td>isolation/resource-sharing</td>
							<td>++++/NAN</td>
						</tr>
						<tr>
							<td>handling-during runtime</td>
							<td>----(biosupdate)</td>
						</tr>
						<tr>
							<td>migration system-system</td>
							<td>----(hardware-drivers)</td>
						</tr>
					</table>
				</section>


				<section data-background="#662222" data-background-transition="concave">
					<h2>virtual-machine</h2>
					<table>
						<tr>
							<td>cost</td>
							<td>++(fix/cpu/ram/disk)<td>
						</tr>
						<tr>
							<td>security</td>
							<td>+++(mother-total-access(ec2))</td>
						</tr>
						<tr>
							<td>performance cpu/ram/disk/container</td>
							<td>+++/++++/+++/+++(2xOS)</td>
						</tr>
						<tr>
							<td>isolation/resource-sharing</td>
							<td>+++(different os)/---</td>
						</tr>
						<tr>
							<td>handling-during runtime</td>
							<td>---(no external)</td>
						</tr>
						<tr>
							<td>migration system-system</td>
							<td>++(size)</td>
						</tr>
					</table>

				</section>

        <section data-background="#662222" data-background-transition="slide">
          <h2>virtual-machine keyfeatures</h2>
          <span class="fragment">
            <h4>different os xen/hyperv/kvm/virtualbox</h4>
          </span>
          <span class="fragment">
            <h4>central storage/networking</h4>
          </span>
          <span class="fragment">
            <h4>paravirtual drivers</h4>
          </span>
          <span class="fragment">
            <h4>pci-passthrue / sr-iov</h4>
          </span>
          <span class="fragment">
            <h4>fix resources</h4>
          </span>
          <span class="fragment">
            <h4>nesting</h4>
          </span>
          <span class="fragment">
            <h4>open virtualbox</h4>
          </span>
        </section>

				<section data-background="#666622" data-background-transition="concave">
					<h2>chroot/cgroup</h2>
					<table>
						<tr>
							<td>cost</td>
							<td>++++<td>
						</tr>
						<tr>
							<td>security</td>
							<td>++(mother-total-access)</td>
						</tr>
						<tr>
							<td>performance cpu/ram/disk/container</td>
							<td>++++/++++/++++/++++</td>
						</tr>
						<tr>
							<td>isolation/resource-sharing</td>
							<td>---(same kernel)/---</td>
						</tr>
						<tr>
							<td>handling-during runtime</td>
							<td>+++(easy)</td>
						</tr>
						<tr>
							<td>migration system-system</td>
							<td>+++(-live)</td>
						</tr>
					</table>				
        </section>

        <section data-background="#662222" data-background-transition="slide">
          <h2>lxc keyfeatures</h2>
          <span class="fragment">
            <h4>lxc/jails/zones</h4>
          </span>
          <span class="fragment">
            <h4>guest == mother (distros)</h4>
          </span>
          <span class="fragment">
            <h4>central storage/networking</h4>
          </span>
          <span class="fragment">
            <h4>less features/kernel modules/nfs/drb/headless</h4>
          </span>
          <span class="fragment">
            <h4>shared resources</h4>
          </span>
          <span class="fragment">
            <h4>nesting</h4>
          </span>
          <span class="fragment">
            <h4>open linux show lxc</h4>
          </span>
        </section>

				<section data-background="#3333aa" data-background-transition="slide">
					<h2>choose the right?</h2>
						<ul>
							<li>cost</li>
							<li>security</li>
							<li>performance cpu/ram/disk/container</li>
							<li>isolation/resource-sharing</li>
							<li>handling-during runtime</li>
							<li>migration system-system</li>
						</ul>
        </section>
        <section data-background="#1144aa" data-background-transition="slide">
          <h2>do we need multiple /?</h2>
            <ul>
              <li>depends</li>
              <li>security</li>
              <li>stablity of the application external dependencies</li>
              <li>persitence lifecycle != application lifecycle</li>
            </ul>
				</section>

				<section data-background="#003300" data-background-transition="zoom">
					<h2>what next</h2>
          <ul>
            <li>running a host
              <ul>
                <li>networking bonds + bridges</li>
                <li>storage md + lvs + unionfs + zfs/btrfs</li>
              </ul>
            </li> 
            <li>working with docker/rkt</li>
            <li>feel a cluster scheduler
              <ul>
                <li>kubernets</li>
                <li>coreos</li>
                <li>mesos</li>
              </ul>
            </li>
				</section>

				<section data-background="#111111" data-background-transition="fade" >
					<h2>thx</h2>
					<p>
						<small>powered by <a href="http://github.com/mabels/talks">meno@abels.name</a> / <a href="http://twitter.com/fastandfearless">@fastandfearless</a></small>
					</p>
				</section>

				</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'fade', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

      Reveal.addEventListener( 'customevent', function() {
          console.log( '"customevent" has fired' );
      } );

		</script>

  <script src="d3/d3.min.js"></script>
        <script type="text/javascript">
          var d3_render = function(clazz, data, fsize) {
            var width = 900,
                height = 480,
                radius = Math.min(width, height) / 2,
                color = d3.scale.category20c();

            var svg = d3.select("."+clazz)
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + width / 2 + "," + height * .50 + ")");

            var partition = d3.layout.partition()
                .sort(null)
                .size([2 * Math.PI, radius * radius])
                .value(function(d) { return 1; });

            var arc = d3.svg.arc()
                .startAngle(function(d) { return d.x; })
                .endAngle(function(d) { return d.x + d.dx; })
                .innerRadius(function(d) { return Math.sqrt(d.y); })
                .outerRadius(function(d) { return Math.sqrt(d.y + d.dy); });

            var stash = function(d) {
              d.x0 = d.x;
              d.dx0 = d.dx;
            }

            var getAngle = function(d) {
              // Offset the angle by 90 deg since the '0' degree axis for arc is Y axis, while
              // for text it is the X axis.
              var thetaDeg = (180 / Math.PI * (arc.startAngle()(d) + arc.endAngle()(d)) / 2 );
                  // If we are rotating the text by more than 90 deg, then "flip" it.
                  // This is why "text-anchor", "middle" is important, otherwise, this "flip" would
              // a little harder.
              return (thetaDeg > 90) ? thetaDeg - 180 : thetaDeg;
            }


            var arcTween = function(a) {
              var i = d3.interpolate({x: a.x0, dx: a.dx0}, a);
              return function(t) {
                var b = i(t);
                a.x0 = b.x;
                a.dx0 = b.dx;
                return arc(b);
              }
            }

            var dataPump = function(root) {
              var path = svg.datum(root).selectAll("path")
                  .data(partition.nodes)
                  .enter()
                  .append("g")

              path.append("path")
                  .attr("display", function(d) { return d.depth ? null : "none"; }) // hide inner ring
                  .attr("d", arc)
                  .style("stroke", "#fff")
                  .style("fill", function(d) { return color((d.children ? d : d.parent).name); })
                  .style("fill-rule", "evenodd")
                  .each(stash);

              path.append("text")
                  .text(function(d) { console.log("Q", d.name); return d.name})
                  .classed("label", true)
                  .attr("x", function(d) { return d.x; })
                  .attr("text-anchor", "middle")
                  .style("font-size",fsize+"px")
                  // translate to the desired point and set the rotation
                  .attr("transform", function(d) {
                      if (d.depth > 0) {
                          return "translate(" + arc.centroid(d) + ")" +
                                 "rotate(" + getAngle(d) + ")";
                      }  else {
                          return null;
                      }
                  })
                  .attr("dx", "6") // margin
                  .attr("dy", ".35em") // vertical-align
                  .attr("pointer-events", "none");


              /*
                var value = this.value === "count"
                    ? function() { return 1; }
                    : function(d) { return d.size; };

                path.data(partition.value(value).nodes)
                  .transition()
                    .duration(1500)
                    .attrTween("d", arcTween);
                    */
            };

            dataPump(data);
          }

          d3_render("shell1", shell1, 34);
          d3_render("shell2", shell2, 24);
          d3_render("shell3", shell3, 15);

        </script>


	</body>
</html>
